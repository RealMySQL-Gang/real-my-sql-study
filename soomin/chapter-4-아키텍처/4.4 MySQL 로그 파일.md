<h1 align = 'center'>4.4 MySQL 로그 파일</h1>

## 1️⃣ 에러 로그 파일

MySQL이 동작하면서 발생하는 **각종 에러 및 상태 메시지**가 기록되는 로그 파일이다. 특히 **서버가 시작하거나 종료될 때**, 그리고 **트랜잭션 복구**나 **비정상 종료** 같은 주요 이벤트 발생 시 이 로그를 통해 확인할 수 있다.

### (1) MySQL 시작 시 정보 메시지

MySQL을 처음 시작하거나 설정을 변경해서 다시 시작하는 경우, 설정이 의도한 대로 반영되었는지 반드시 이 로그에서 확인해야 한다.  
설정 변수명이 오타 나거나, 값을 잘못 넣었을 경우도 여기서 확인 가능하다.

### (2) InnoDB 트랜잭션 복구 메시지

서버가 정상적으로 종료되지 않은 경우, MySQL이 재시작되면서 InnoDB 스토리지 엔진은 자동으로 복구를 시도한다. 이때 어떤 트랜잭션을 복구했는지, 어떤 undo/redo 작업을 수행했는지를 이 로그에 남긴다.

### (3) 쿼리 실행 중 발생한 에러 메시지

쿼리 자체에 문법 오류가 있는 경우보다는, 쿼리 실행 도중 발생한 에러 — 예를 들면 디스크 공간 부족, 잠금 충돌, 디코딩 실패 등 — 이 기록된다.

### (4) 커넥션 종료 관련 에러 (Aborted Connection)

클라이언트가 강제로 커넥션을 끊거나, 서버에서 무언가 문제가 생겨 커넥션을 강제 종료시킨 경우 여기에 기록된다.  
클라이언트가 비정상 종료되었는지, 서버가 timeout으로 끊었는지 여부도 알 수 있다.

### (5) InnoDB 상태 조회 명령 결과

`SHOW ENGINE INNODB STATUS` 같은 명령어를 실행하면, 현재 InnoDB 내부 상태를 출력하는데 그 결과가 에러 로그에도 함께 기록된다.  
이걸 통해 현재 잠금 대기 상태나 트랜잭션 충돌 상황 등을 분석할 수 있다.

### (6) MySQL 종료 메시지

정상적으로 서버를 종료했을 때, 종료 시점에 어떤 프로세스가 종료되었는지, 버퍼 플러시가 끝났는지 등도 이 로그에 남는다.

## 2️⃣ 제너럴 쿼리 로그 파일

MySQL 서버에 들어오는 **모든 SQL 요청을 그대로 기록**하는 로그다.  
SQL 문장이 어떻게 들어왔는지 순차적으로 기록되므로, 주로 **디버깅용**이나 **개발 환경에서 테스트 로그 확인할 때** 활용한다.

단점은, 모든 쿼리를 기록하다 보니 **성능에 부담**을 줄 수 있다는 점이다.  
운영 환경에서는 보통 끄고 사용한다.

## 3️⃣ 슬로우 쿼리 로그

말 그대로, 실행 시간이 오래 걸린 쿼리들을 기록하는 로그다.  
기본적으로 설정된 시간(threshold) 이상으로 실행된 쿼리가 여기에 기록되며, 쿼리 최적화 작업을 할 때 가장 먼저 보는 로그다.

### (1) 슬로우 쿼리 통계

슬로우 쿼리 로그에 쌓인 쿼리들을 분석하면, 어떤 쿼리가 얼마나 느리게 실행되고 있는지 확인할 수 있다.  
처음에는 단순히 실행 시간 기준으로 확인할 수 있지만, `mysqldumpslow`, `pt-query-digest` 같은 툴로 통계도 뽑을 수 있다.

### (2) 실행 빈도 및 누적 실행 시간 순 랭킹

어떤 쿼리가 가장 자주 실행되었는지, 혹은 누적해서 가장 많은 시간이 소요되었는지를 기준으로 랭킹을 매길 수 있다.  
이걸 보면, 단순히 오래 걸리는 쿼리보다 **많이 호출되면서 누적 부담을 주는 쿼리**를 찾아낼 수 있다.

### (3) 쿼리 별 실행 횟수 및 누적 실행 시간 상세 정보

각 쿼리별로 얼마나 실행되었고, 평균 소요 시간은 얼마였는지, 최대 소요 시간은 어느 정도였는지를 확인할 수 있다.  
단일 쿼리의 성능 문제뿐 아니라, **전체 시스템에 부담을 주는 원인 쿼리**를 찾는 데도 유용하다.